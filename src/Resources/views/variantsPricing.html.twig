{% import '@SyliusShop/Common/Macro/money.html.twig' as money %}
{% import '@EcolosSyliusEuPlugin/basePrice.html.twig' as _basePrice %}

{% set unitAttr = product.getAttributeByCodeAndLocale(ecolos_eu_contents_unit, sylius.localeCode) %}
{% set basePrice = price.value %}

{% if unitAttr is not null and unitAttr.value is not null %}
    {% set unit = unitAttr.attribute.configuration.choices[unitAttr.getValue()|first][sylius.localeCode] %}

    {% if (unit == 'ml') or (unit == 'g') or (unit == 'mg') %}
        {% set basePrice = _basePrice.price(
            price.value,
            product.getAttributeByCodeAndLocale(ecolos_eu_contents, sylius.localeCode).value, unit) %}

        {% set unit = _basePrice.transformUnit(unit) %}
    {% endif %}
{% endif %}

{% if basePrice is defined %} data-base-value='{{ basePrice }}' {% endif %}
{% if unit is defined %} data-base-contents-unit='{{ unit }}' {% endif %}
