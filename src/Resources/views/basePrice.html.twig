{% macro price(gross, contents, contentsUnit) %}
    {% set number = gross / contents %}

    {% if contentsUnit in ["ml", "g"] %}
        {% set number = number * 10 %}
    {% elseif contentsUnit == "mg" %}
        {% set number = number * 10000 %}
    {% else %}
        {% set number = number / 100 %}
    {% endif %}

    {{ number|round(2)|number_format(2, ',', '.') }}
{% endmacro %}

{% macro html(product, _contentsUnit, _contents, pdp) %}
    {% import _self as macros %}

    {% set contentsUnit = product.getAttributeByCodeAndLocale(_contentsUnit, sylius.localeCode) %}

    {% if contentsUnit is not null %}
        {% set unit = contentsUnit.attribute.configuration.choices[contentsUnit.value[0]][sylius.localeCode] %}

        {% if unit is not null %}
            {% set contents = product.getAttributeByCodeAndLocale(_contents, sylius.localeCode) %}

            {% if contents is defined and contents.value is not same as(0) %}
                <span id='ecolos-eu-product-base-price'>
                    {% if hasBasePrice(unit) == true %}
                        {% if pdp != true %}
                            {% import '@EcolosSyliusEuPlugin/from.html.twig' as from %}

                            {{ from.variants(product) }}
                        {% endif %}
                        {{ macros.price(product|sylius_resolve_variant|sylius_calculate_price({'channel': sylius.channel}), contents.value, unit) }}
                        â‚¬ /{{ macros.transformUnit(unit) }}
                    {% endif %}
                </span>
            {% endif %}
        {% endif %}
    {% endif %}
{% endmacro %}

{% macro transformUnit(contentsUnit) %}
    {% if contentsUnit == 'ml' %} {{ 'l' }}
    {% elseif contentsUnit in ["mg", "g"] %} {{ 'kg' }}
    {% else %} {{ contentsUnit }}
    {% endif %}
{% endmacro %}
